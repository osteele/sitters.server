#!/usr/bin/env coffee

_ = require 'underscore'
Q = require 'q'
_(global).extend require('../lib/models')
sitters = require '../data/sitters.json'

createSittersP = Q.all sitters.map (sitter) ->
  id = sitter.id
  data = _.extend {}, sitter
  delete data.id
  data = JSON.stringify(data)

  console.info 'Updating', id, sitter.name
  Sitter.findOrCreate {id}, {data}

createSittersP
  .catch( (error) -> console.error error )
  .done ->
    process.exit()
