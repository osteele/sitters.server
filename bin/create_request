#!/usr/bin/env coffee

argv = require('optimist').argv
subcommand = argv._[0] || 'add-sitter'

Firebase = require('firebase')
rootFB = new Firebase('https://sevensitters.firebaseIO.com/')
requestFB = rootFB.child('request')

DemoAccountKey = 'facebook/511404287'

RequestTypes =
  'add-sitter':
    {requestType: 'addSitter', accountKey: DemoAccountKey, parameters: {sitterId: 2, delay: 0}}
  'register-user':
    {requestType: 'registerUser', accountKey: DemoAccountKey, parameters: {displayName: 'Sarah', email: 'user@guest.com'}}
  'set-sitter-count':
    {requestType: 'setSitterCount', accountKey: DemoAccountKey, parameters: {count: 3}}

if subcommand of RequestTypes
  message = RequestTypes[subcommand]
  requestFB.push message, -> process.exit()
else
  console.log 'Requests:'
  for name of RequestTypes
    console.log '  ' + name
  process.exit()
